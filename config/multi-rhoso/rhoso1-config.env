#!/bin/bash
# RHOSO Instance 1 Configuration
# Source this file before deploying: source config/multi-rhoso/rhoso1-config.env

#############################################
# Multi-RHOSO Instance Identifier
#############################################
export RHOSO_INSTANCE_NAME=rhoso1

#############################################
# Namespace Configuration
#############################################
export NAMESPACE=openstack
export OPERATOR_NAMESPACE=openstack-operators

#############################################
# Shared Network Infrastructure (Same for all instances)
#############################################
export NNCP_INTERFACE=enp6s0
export NNCP_BRIDGE=ospbr
export NETWORK_VLAN_START=20
export NETWORK_VLAN_STEP=1
export NETWORK_MTU=1500

#############################################
# Instance-Specific Network Addressing
# MUST be unique and non-overlapping with other RHOSO instances
#############################################
# Control Plane Network
export NNCP_CTLPLANE_IP_ADDRESS_PREFIX=192.168.122
export NNCP_CTLPLANE_IP_ADDRESS_SUFFIX=10
export NNCP_DNS_SERVER=192.168.122.1
export NNCP_GATEWAY=192.168.122.1

# Internal API Network (VLAN 20)
export NETWORK_INTERNALAPI_ADDRESS_PREFIX=172.17.0

# Storage Network (VLAN 21)
export NETWORK_STORAGE_ADDRESS_PREFIX=172.18.0

# Tenant Network (VLAN 22)
export NETWORK_TENANT_ADDRESS_PREFIX=172.19.0

# Storage Management Network (VLAN 23)
export NETWORK_STORAGEMGMT_ADDRESS_PREFIX=172.20.0

# Designate Network (VLAN 25)
export NETWORK_DESIGNATE_ADDRESS_PREFIX=172.28.0

# Designate External Network (VLAN 26)
export NETWORK_DESIGNATE_EXT_ADDRESS_PREFIX=172.50.0

#############################################
# MetalLB IP Pools (MUST be unique)
#############################################
export METALLB_POOL=192.168.122.80-192.168.122.90

#############################################
# Data Plane Configuration
#############################################
export DATAPLANE_COMPUTE_IP=192.168.122.100
export DATAPLANE_COMPUTE_0_IP=192.168.122.100
export DATAPLANE_COMPUTE_0_NAME=edpm-compute-0
export DATAPLANE_TOTAL_NODES=1
export DATAPLANE_SSHD_ALLOWED_RANGES="['192.168.122.0/24']"

#############################################
# Network Isolation Settings
#############################################
export NETWORK_ISOLATION=true
export NETWORK_ISOLATION_USE_DEFAULT_NETWORK=true
export NETWORK_ISOLATION_IPV4=true
export NETWORK_ISOLATION_IPV6=false

#############################################
# Common Settings
#############################################
export PASSWORD=12345678
export TIMEOUT=500s

echo "âœ… RHOSO Instance 1 configuration loaded"
echo "   Instance Name: ${RHOSO_INSTANCE_NAME}"
echo "   Namespace: ${NAMESPACE}"
echo "   MetalLB Pool: ${METALLB_POOL}"
echo "   Internal API: ${NETWORK_INTERNALAPI_ADDRESS_PREFIX}.0/24"
echo "   Storage: ${NETWORK_STORAGE_ADDRESS_PREFIX}.0/24"
echo "   Tenant: ${NETWORK_TENANT_ADDRESS_PREFIX}.0/24"
